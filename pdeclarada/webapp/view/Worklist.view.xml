<mvc:View xmlns:core="sap.ui.core"
	controllerName="com.tasa.pdeclarada.controller.Worklist"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:semantic="sap.f.semantic"
	xmlns:f="sap.ui.layout.form"
	xmlns:table="sap.ui.table"
    xmlns:chart="sap.suite.ui.microchart"
	xmlns:layout="sap.ui.layout">

	<semantic:SemanticPage
		id="page"
		toggleHeaderOnTitleClick="false">

		<semantic:titleHeading>
			<Title
				text="{i18n>worklistTitle}"
				level="H2"/>
		</semantic:titleHeading>

		<!-- Header Content -->
		<semantic:headerContent>
			<f:Form id="idFormHeader" >
				<f:formContainers>
					<f:FormContainer >
						<f:formElements>
							<f:FormElement label="Fecha">
								<f:fields>
									<DatePicker id="fechaPescaDeclarada" valueFormat="yyyy-MM-dd" />
								</f:fields>
							</f:FormElement>
							<f:FormElement label="MotivoMarea">
								<f:fields>
									<Select id="motivoPescaDeclarada" items="{ path: 'worklistView>/motivos' }">
										<core:Item key="{worklistView>id}" text="{worklistView>descripcion}" />
									</Select>
								</f:fields>
							</f:FormElement>
							<f:FormElement >
								<f:fields>
									<Button text="Buscar" type="Emphasized" press=".buscarPescaDescargada"/>
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
					<f:FormContainer >
						<f:formElements>
							<f:FormElement label="Pesca declarada">
								<f:fields>
									<Text text="{/totalGenPescDecl}/{/totalGenNumEmba}" />
								</f:fields>
							</f:FormElement>
							<f:FormElement label="Pesca descargada">
								<f:fields>
									<Text text="{/totalGenPescDesc}/{/totalGenNumEmbaDesc}" />
								</f:fields>
							</f:FormElement>
							<f:FormElement label="Hora">
								<f:fields>
									<Text text="{/Hora}" />
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
				</f:formContainers>
				<f:layout>
					<f:ResponsiveGridLayout
						labelSpanXL="2"
						labelSpanL="3"
						labelSpanM="4"
						labelSpanS="12"
						adjustLabelSpan="false"
						emptySpanXL="0"
						emptySpanL="0"
						emptySpanM="0"
						emptySpanS="0"
						columnsXL="2"
						columnsL="2"
						columnsM="1"
						singleContainerFullSize="false" />
				</f:layout>
			</f:Form>
		</semantic:headerContent>

		<semantic:content>
			<layout:Grid defaultSpan="XL12 L12 M12 S12" >		
				<table:Table id="tablePescaDeclarada" 
					rows="{ path: '/STR_TP', formatter: '.formatter.setColorsFields' }"
					busyIndicatorDelay="{worklistView>/tableBusyDelay}"
					fixedBottomRowCount="1"
					selectionMode="None"
					visibleRowCount="5">
					<table:columns>
						<table:Column width="8rem">
							<Label text="Planta" />
							<table:template>
								<Text text="{DESCR}"/>     
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="Center" width="4rem">
							<table:multiLabels>
								<Label text="Flota propia" textAlign="Center" />
								<Label text="Asig" textAlign="Center" />
							</table:multiLabels>
							<table:template>
								<Text text="{CEMBA}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="End" width="4rem">
							<table:multiLabels>
								<Label text="Flota propia" />
								<Label text="Pesc" />
							</table:multiLabels>
							<table:template>
								<Text text="{CEMBP}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="End" width="4rem">
							<table:multiLabels>
								<Label text="Flota propia" />
								<Label text="Inop" textAlign="Center" />
							</table:multiLabels>
							<table:template>
								<Text text="{CEMBI}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="End" width="4rem">
							<table:multiLabels>
								<Label text="Flota propia" />
								<Label text="Otro" />
							</table:multiLabels>
							<table:template>
								<Text text="{CEMBO}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2" hAlign="Center" width="4rem">
							<table:multiLabels >
								<Label text="% CBOD" />
								<Label text="Asig" />
							</table:multiLabels>
							<table:template>
								<Text text="{PORC_CBOD}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2" width="4rem">
							<table:multiLabels>
								<Label text="% CBOD" />
								<Label text="Oper" />
							</table:multiLabels>
							<table:template>
								<Text text="{PORC_CBOD_OPER}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="Center" width="4rem">
							<table:multiLabels>
								<Label text="Total Pesca" />
								<Label text="Desc" />
							</table:multiLabels>
							<table:template>
								<Text text="{CNPDS}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" width="4rem">
							<table:multiLabels>
								<Label text="Total Pesca" />
								<Label text="Decl" />
							</table:multiLabels>
							<table:template>
								<Text text="{TOT_PESC_DECL}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" width="4rem">
							<table:multiLabels>
								<Label text="Total Pesca" />
								<Label text="E/P" />
							</table:multiLabels>
							<table:template>
								<Text text="{TOT_NUM_EMBA}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" width="4rem">
							<table:multiLabels>
								<Label text="Total Pesca" />
								<Label text="%" />
							</table:multiLabels>
							<table:template>
								<Text text="{PORC_PESC_DECL}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2" hAlign="Center">
							<table:multiLabels>
								<Label text="Pesca Propios" />
								<Label text="TN" />
							</table:multiLabels>
							<table:template>
								<Text text="{CNPEP}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2">
							<table:multiLabels>
								<Label text="Pesca Propios" />
								<Label text="E/P" />
							</table:multiLabels>
							<table:template>
								<Text text="{NEMBP}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4" hAlign="Center">
							<table:multiLabels>
								<Label text="Pesca Terceros" />
								<Label text="TN" />
							</table:multiLabels>
							<table:template>
								<Text text="{CNPET}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="4">
							<table:multiLabels>
								<Label text="Pesca Terceros" />
								<Label text="E/P" />
							</table:multiLabels>
							<table:template>
								<Text text="{NEMBT}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2" hAlign="Center">
							<table:multiLabels>
								<Label text="Promedio" />
								<Label text="Prop" />
							</table:multiLabels>
							<table:template>
								<Text text="{PROM_PESC_PROP}"/>
							</table:template>
						</table:Column>
						<table:Column headerSpan="2">
							<table:multiLabels>
								<Label text="Promedio" />
								<Label text="Terc" />
							</table:multiLabels>
							<table:template>
								<Text text="{PROM_PESC_TERC}"/>
							</table:template>
						</table:Column>
						<table:Column >
							<Label text="Ver detalle" />
							<table:template>
								<Button icon="sap-icon://show" />
							</table:template>
						</table:Column>
					</table:columns>
				</table:Table>

				<layout:HorizontalLayout>
					<layout:layoutData>
						<layout:GridData span="XL12 L12 M12 S12"/>
					</layout:layoutData>
					<!-- Graficos -->
					<VBox>
						<Text text="Porc Pesca por Puerto 00%" />
						<Text text="Porc Cap Bod por Puerto (99%)" />
					</VBox>
					
				</layout:HorizontalLayout>

				<layout:HorizontalLayout>
					<layout:layoutData>
						<layout:GridData span="XL12 L12 M12 S12"/>
					</layout:layoutData>
					<!-- Graficos -->
					<FlexBox width="20rem" height="10rem" alignItems="End" justifyContent="SpaceAround" class="sapUiSmallMargin">
						<items>
							<chart:InteractiveBarChart bars="{/STR_TP_GRAPHICS}" labelWidth="25%" displayedBars="3" selectionChanged="selectionChanged" press="press">
								<chart:bars>
									<chart:InteractiveBarChartBar label="{descripcion}" value="{value}" color="Critical"/>
								</chart:bars>
							</chart:InteractiveBarChart>
						</items>
					</FlexBox>

					<FlexBox width="20rem" height="10rem" alignItems="Center" justifyContent="SpaceAround" class="sapUiSmallMargin">
						<items>
							<chart:InteractiveDonutChart segments="{/STR_TP_GRAPHICS}" selectionChanged="onSelectionChanged">
								<chart:segments>
									<chart:InteractiveDonutChartSegment label="{descripcion}" value="{value}" displayedValue="{value}%" color="Error"/>
								</chart:segments>
							</chart:InteractiveDonutChart>
						</items>
					</FlexBox>
				</layout:HorizontalLayout>
			</layout:Grid>
		</semantic:content>

	</semantic:SemanticPage>

</mvc:View>